/*  2kb memory, 2kb ~ 8kb is the copy of first 2kb 
 *  000 0 0 000 0000 0000
 *     |   |2kb
 *     |8kb
 *
 */

module cpu_memory(
    input logic         CLK,
    input logic         w,
    input logic [15:0]  address,
    input logic [7:0]   in,

    output logic [7:0]  out
);
    logic [7:0] ram [0:2047];
    logic vaild_address;
    logic [10:0] real_address; 

    always @(posedge CLK) begin
        if(w & vaild_address)
            ram[real_address] <= in;
        out <= ram[real_address]
    end
    always_comb begin
        vaild_address = ~(address[15] | address[14] | address[13]);  // ==000
        real_address = address[10:0];
    end
endmodule